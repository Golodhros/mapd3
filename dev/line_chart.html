<html>
<head>
<link rel="stylesheet" href="../dist/mapd3.css">
<style>
.mapd3 {
  user-select: none;
}
</style>
</head><body>
<div class="chart1"></div>
<div class="chart2"></div>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script> -->
<script src="../dist/mapd3.js"></script>
<script>

/*
* axes locking
* domain editor
* problem with selecting first point
* single point line/area chart
* null line break
*/

const keyType = "string" // time, number, string
const chartType = "line" // line, area, stackedArea, bar, stackedBar

const dataManager = mapd3.DataManager()
    .setConfig({
      keyType,
      range: [0, 100],
      pointCount: 20,
      groupCount: 2,
      lineCount: 4
    })
const data = dataManager.generateTestDataset()

// const observer = mapd3.Observer(dataManager)

const colors = mapd3.colors.mapdColors
const palette = data.series.map((d, i) => ({key: d.id, value: colors[i]}))

const chartNode1 = document.querySelector(".chart1")
const chart1 = mapd3.Chart(chartNode1)
  .setConfig({
    width: 800,
    height: 400,
    margin: {
      top: 16,
      right: 32,
      bottom: 40,
      left: 64
    },
    grid: "horizontal",
    xAxisFormat: "%x",
    yAxisFormat: ".1f",
    yTicks: 5,
    colorSchema: palette,
    keyType,
    chartType,
    tickSkip: 4
  })
  .setXTitle("X Title")
  .setYTitle("Y Title")
  .setData(data)

mapd3.Tooltip(chart1)
  .setConfig({
    tooltipWidth: 160
  })


mapd3.Legend(chart1)
  .setContent(data.series)
  .setTitle("Title")
  .setSize(80, "auto")
  .setPosition(780)
  .show()

mapd3.Brush(chart1)
// .on("brushMove", (...arg) => console.log("brush", ...arg))

mapd3.Hover(chart1)
  // .on("hover", (...arg) => console.log("hover", ...arg))

mapd3.Binning(chart1)
  // .on("change", (...arg) => console.log("binning", ...arg))

// mapd3.DomainEditor(chart1)

// const chart2 = mapd3.Chart(".chart2")
//   .setConfig({
//     width: 800,
//     height: 100,
//     margin: {
//       top: 8,
//       right: 32,
//       bottom: 32,
//       left: 32
//     },
//     grid: "horizontal",
//     xAxisFormat: "%x",
//     yAxisFormat: ".1f",
//     yTicks: 3,
//     colorSchema: palette,
//     keyType,
//     chartType,
//     tickSkip: 20
//   })
//   .setData(data)

// const chart2Brush = mapd3.Brush(chart2)
// chart2Brush.on("brushMove", (...arg) => {
//   observer.pub("brushChange", ...arg)
// })

// // chart2.setData(data)
// // chart2Brush.update()

// observer.sub("dataFilter", (_data) => {
//   chart1.setData(_data)
// })

</script>
</body>
</html>