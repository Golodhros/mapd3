!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3/build/d3")):"function"==typeof define&&define.amd?define(["d3/build/d3"],e):"object"==typeof exports?exports.mapd3=e(require("d3/build/d3")):t.mapd3=e(t["d3/build/d3"])}("undefined"!=typeof self?self:this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=14)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"axisBottom",{enumerable:!0,get:function(){return r.axisBottom}}),Object.defineProperty(e,"axisLeft",{enumerable:!0,get:function(){return r.axisLeft}}),Object.defineProperty(e,"axisRight",{enumerable:!0,get:function(){return r.axisRight}}),Object.defineProperty(e,"timeParse",{enumerable:!0,get:function(){return r.timeParse}}),Object.defineProperty(e,"timeFormat",{enumerable:!0,get:function(){return r.timeFormat}}),Object.defineProperty(e,"utcFormat",{enumerable:!0,get:function(){return r.utcFormat}}),Object.defineProperty(e,"format",{enumerable:!0,get:function(){return r.format}}),Object.defineProperty(e,"bisector",{enumerable:!0,get:function(){return r.bisector}}),Object.defineProperty(e,"extent",{enumerable:!0,get:function(){return r.extent}}),Object.defineProperty(e,"sum",{enumerable:!0,get:function(){return r.sum}}),Object.defineProperty(e,"range",{enumerable:!0,get:function(){return r.range}}),Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return r.merge}}),Object.defineProperty(e,"nest",{enumerable:!0,get:function(){return r.nest}}),Object.defineProperty(e,"dispatch",{enumerable:!0,get:function(){return r.dispatch}}),Object.defineProperty(e,"easeLinear",{enumerable:!0,get:function(){return r.easeLinear}}),Object.defineProperty(e,"easeQuadInOut",{enumerable:!0,get:function(){return r.easeQuadInOut}}),Object.defineProperty(e,"select",{enumerable:!0,get:function(){return r.select}}),Object.defineProperty(e,"mouse",{enumerable:!0,get:function(){return r.mouse}}),Object.defineProperty(e,"event",{enumerable:!0,get:function(){return r.event}}),Object.defineProperty(e,"transition",{enumerable:!0,get:function(){return r.transition}}),Object.defineProperty(e,"randomUniform",{enumerable:!0,get:function(){return r.randomUniform}}),Object.defineProperty(e,"randomNormal",{enumerable:!0,get:function(){return r.randomNormal}}),Object.defineProperty(e,"timeDay",{enumerable:!0,get:function(){return r.timeDay}}),Object.defineProperty(e,"timeMonth",{enumerable:!0,get:function(){return r.timeMonth}}),Object.defineProperty(e,"area",{enumerable:!0,get:function(){return r.area}}),Object.defineProperty(e,"curveCatmullRom",{enumerable:!0,get:function(){return r.curveCatmullRom}}),Object.defineProperty(e,"line",{enumerable:!0,get:function(){return r.line}}),Object.defineProperty(e,"stack",{enumerable:!0,get:function(){return r.stack}}),Object.defineProperty(e,"stackOffsetNone",{enumerable:!0,get:function(){return r.stackOffsetNone}}),Object.defineProperty(e,"stackOrderNone",{enumerable:!0,get:function(){return r.stackOrderNone}}),Object.defineProperty(e,"scaleTime",{enumerable:!0,get:function(){return r.scaleTime}}),Object.defineProperty(e,"scalePoint",{enumerable:!0,get:function(){return r.scalePoint}}),Object.defineProperty(e,"scaleBand",{enumerable:!0,get:function(){return r.scaleBand}}),Object.defineProperty(e,"scaleLinear",{enumerable:!0,get:function(){return r.scaleLinear}}),Object.defineProperty(e,"scaleOrdinal",{enumerable:!0,get:function(){return r.scaleOrdinal}}),Object.defineProperty(e,"symbol",{enumerable:!0,get:function(){return r.symbol}}),Object.defineProperty(e,"symbolTriangle",{enumerable:!0,get:function(){return r.symbolTriangle}}),Object.defineProperty(e,"brushX",{enumerable:!0,get:function(){return r.brushX}});var r=n(16)},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){return JSON.parse(JSON.stringify(t))}function i(t,e){var n=a(t);return"time"===e?(n.forEach(function(t){t[f.keys.DATA]=new Date(t[f.keys.DATA])}),n.sort(function(t,e){return t[f.keys.DATA].getTime()-e[f.keys.DATA].getTime()})):"string"===e?n.sort(function(t,e){return t[f.keys.DATA].localeCompare(e[f.keys.DATA],"en",{numeric:!1})}):n.sort(function(t,e){return t[f.keys.DATA]-e[f.keys.DATA]}),n}function o(t){return r(new Set(t))}function l(t,e,n){if("time"===n||"number"===n)return t.invert(e);var r=t.step(),a=Math.round(e/r);return t.domain()[a]}function s(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=r in e?e[r]:t[r]);return n}function u(t,e){var n=!1,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];n||(n=!0,clearTimeout(r),r=setTimeout(function(){n=!1,t.apply(void 0,i)},e))}}function c(t){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.on.apply(t,["".concat(n[0],".rebind")].concat(r(n.slice(1)))),this}}function d(t,e){var n=t;return"time"===e?n=new Date(t):"number"===e&&(n=Number(t)),n}Object.defineProperty(e,"__esModule",{value:!0}),e.cloneData=a,e.sortData=i,e.getUnique=o,e.invertScale=l,e.override=s,e.throttle=u,e.rebind=c,e.stringToType=d;var f=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keys=void 0;var r={DATA:"key",VALUE:"value",ID:"id",LABEL:"label",GROUP:"group",VALUES:"values",SERIES:"series"};e.keys=r},function(t,e,n){"use strict";function r(t,e){var n=void 0===e?!t.classed("selected"):e;t.classed("selected",n).classed("dimmed",!n)}function a(t,e){return i(t,e,{toggleOffIsEnabled:!1,toggleMultipleIsEnabled:!1})}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{toggleOffIsEnabled:!1,toggleMultipleIsEnabled:!1},r=!1;t.classed("selected",function(){var t=this.classList.contains("selected"),a=this===e.node(),i=!1;return i=a?!n.toggleOffIsEnabled||!t:!!n.toggleMultipleIsEnabled&&t,r=r||i,i}),t.classed("dimmed",function(){return r&&!this.classList.contains("selected")})}function o(t){t.on("keypress.enter",function(){"Enter"===l.event.key&&this.blur()})}Object.defineProperty(e,"__esModule",{value:!0}),e.toggleOnOff=r,e.exclusiveToggle=a,e.toggle=i,e.blurOnEnter=o;var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0))},function(t,e,n){"use strict";function r(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}function a(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){function e(){if(j.chartWidth=T.width-T.margin.left-T.margin.right,j.chartHeight=T.height-T.margin.top-T.margin.bottom,!j.root){j.root=j.container.append("div").attr("class",D?"legend-group":"tooltip-group").style("position","absolute"),D||j.root.style("pointer-events","none");var t=j.root.append("div").attr("class","tooltip-panel");j.tooltipTitle=t.append("div").attr("class","tooltip-title"),j.tooltipBody=t.append("div").attr("class","tooltip-body"),T.tooltipIsEnabled||h()}D&&j.root.style("max-height",j.chartHeight)}function n(t,e){var n=j.root.node().getBoundingClientRect(),r=t,a=4,i=e+T.margin.top-n.height/2;return t>j.chartWidth/2&&(a=-n.width-4),[r+a,i]}function r(){var t="auto"===j.xPosition?j.chartWidth:j.xPosition,e="auto"===j.yPosition?T.margin.top:j.yPosition;return j.root.transition().duration(T.mouseChaseDuration).ease(T.tooltipEase).style("top","".concat(e,"px")).style("left",function(){var e="auto"===j.yPosition?this.getBoundingClientRect().width:0;return"".concat(t+T.margin.left-e,"px")}),this}function o(){var t=l.format(T.numberFormat),e=j.tooltipBody.selectAll(".tooltip-item").data(j.content),n=e.enter().append("div").attr("class","tooltip-item").merge(e);e.exit().remove();var r=n.selectAll(".section").data(function(t){var e=[{key:"tooltip-color",value:E.colorScale(t[s.keys.ID])},{key:"tooltip-label",value:t[s.keys.LABEL]}];return void 0!==t[s.keys.VALUE]&&e.push({key:"value",value:t[s.keys.VALUE]}),e});return r.enter().append("div").merge(r).attr("class",function(t){return["section",t.key].join(" ")}).each(function(e){var n=l.select(this);"tooltip-color"===e.key?n.html("<div></div>").select("div").attr("class","swatch").style("background",e.value):"value"===e.key?n.html(t(e.value)):n.html(e.value)}),r.exit().remove(),this}function c(){var t=T.tooltipTitle||j.title;return"object"===i(t)&&(t=l.timeFormat(T.dateFormat)(t)),j.tooltipTitle.html(t),this}function d(){return e(),c(),o(),r(),this}function f(t){var e=t;return T.seriesOrder.length?e=y(t):t.length&&t[0][s.keys.LABEL]&&(e=p(t)),j.content=e,this}function y(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:seriesOrder).map(function(e){return t.filter(function(t){return t.name===e})[0]})}function p(t){return(0,u.cloneData)(t).sort(function(t,e){return t[s.keys.LABEL].localeCompare(e[s.keys.LABEL],"en",{numeric:!1})})}function h(){return j.root?(j.root.style("display","none"),this):null}function g(){return j.root&&T.tooltipIsEnabled?(j.root.style("display","block"),this):null}function m(t,r,i){e();var o=n(r,i),l=a(o,2),u=l[0],c=l[1];return O(u),S(c),k(t[s.keys.DATA]),f(t[s.keys.SERIES]),d(),this}function b(t){return t.on("mouseOverPanel.tooltip",g).on("mouseMovePanel.tooltip",m).on("mouseOutPanel.tooltip",h),this}function v(t){return T=(0,u.override)(T,t),this}function x(t){return E=(0,u.override)(E,t),this}function k(t){return j.title=t,this}function O(t){return j.xPosition=t,this}function S(t){return j.yPosition=t,this}function A(t){return j.content=t,this}function P(){return j.root&&(j.root.remove(),j.root=null),this}var D=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T={margin:{top:2,right:2,bottom:2,left:2},width:250,height:45,mouseChaseDuration:0,tooltipEase:l.easeQuadInOut,dateFormat:"%b %d, %Y",numberFormat:".2f",seriesOrder:[],tooltipIsEnabled:!0,tooltipTitle:null,keyType:"time"},E={colorScale:null},j={container:t,root:null,chartWidth:null,chartHeight:null,tooltipDivider:null,tooltipBody:null,tooltipTitle:null,tooltipBackground:null,xPosition:null,yPosition:null,content:null,title:null};return{bindEvents:b,setXPosition:O,setYPosition:S,setContent:A,setTitle:k,hide:h,show:g,drawTooltip:d,setConfig:v,setScales:x,destroy:P}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),s=n(2),u=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.grey=e.mapdColors=e.mapdUI=void 0;var r={skyBlue:"#22A7F0"};e.mapdUI=r;var a=["#ea5545","#bdcf32","#b33dc6","#ef9b20","#87bc45","#f46a9b","#ace5c7","#ede15b","#836dc5","#86d87f","#27aeef"];e.mapdColors=a;var i=["#F8F8FA","#EFF2F5","#D2D6DF","#C3C6CF","#ADB0B6","#666A73","#45494E","#363A43","#282C35"];e.grey=i;var o={mapdUI:r,mapdColors:a,grey:i};e.colors=o},function(t,e,n){"use strict";function r(t){return(0,a.default)(t,!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){return t&&t.__esModule?t:{default:t}}(n(4))},function(t,e,n){"use strict";function r(t){function e(){x.chartWidth=Math.max(b.width-b.margin.left-b.margin.right,0),x.chartHeight=Math.max(b.height-b.margin.top-b.margin.bottom,0),x.root||(x.root=x.container.append("g").classed("brush-group",!0),x.brush=a.brushX().on("start",u).on("brush",c).on("end",d))}function n(){x.brush.extent([[0,0],[x.chartWidth,x.chartHeight]]),x.chartBrush=x.root.call(x.brush),x.chartBrush.selectAll(".brush-rect").attr("height",x.chartHeight),s()}function r(){return a.event.selection.map(function(t){return(0,i.invertScale)(v.xScale,t,b.keyType)})}function o(t,e){return Math.min(Math.max(e[0],t),e[1])}function l(t){return"time"===b.keyType?[new Date(o(new Date(b.brushRangeMin),t)),new Date(o(new Date(b.brushRangeMax),t))]:[o(b.brushRangeMin,t),o(b.brushRangeMax,t)]}function s(){var t=v.xScale.domain(),e=l(t);return e&&x.root.call(x.brush.move,e.map(function(t){return v.xScale(t)})),this}function u(){a.event.sourceEvent&&a.event.selection&&O.call("brushStart",this,r(),b)}function c(){a.event.sourceEvent&&a.event.selection&&O.call("brushMove",this,r(),b)}function d(){if(a.event.sourceEvent){if(!a.event.selection)return void O.call("brushClear",this,b);var t=r();O.call("brushEnd",this,t,b)}}function f(){return b.brushIsEnabled||m(),e(),k.dataBySeries&&n(),this}function y(){return O.on.apply(O,arguments),this}function p(t){return b=(0,i.override)(b,t),this}function h(t){return v=(0,i.override)(v,t),this}function g(t){return k=Object.assign({},k,t),this}function m(){return x.root&&(x.root.remove(),x.root=null),this}var b={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,keyType:null,brushRangeMin:null,brushRangeMax:null,brushIsEnabled:!0},v={xScale:null},x={container:t,dateRange:[null,null],brush:null,chartBrush:null,handle:null,chartWidth:null,chartHeight:null},k={dataBySeries:null},O=a.dispatch("brushStart","brushMove","brushEnd","brushClear");return{on:y,setConfig:p,setData:g,setScales:h,drawBrush:f,destroy:m}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(1)},function(t,e,n){"use strict";function r(t){function e(){k.chartWidth=v.width-v.margin.left-v.margin.right,k.chartHeight=v.height-v.margin.top-v.margin.bottom,k.root||(k.root=k.container.append("g").classed("hover-group",!0).style("pointer-events","none"))}function n(t,n){e(),isNaN(n)||(f(n),d(),"stackedLine"===v.chartType||"stackedArea"===v.chartType||"stackedBar"===v.chartType?c(t):s(t),S.call("hover",this,t))}function r(){return k.root?(k.root.style("display","block"),this):null}function l(){return k.root?(k.root.style("display","none"),this):null}function s(t){u(t[i.keys.SERIES])}function u(t){var e=k.root.selectAll(".dot").data(t);e.enter().append("circle").attr("class","dot").merge(e).attr("cy",function(t){return"stackedArea"===v.chartType||O.groupKeys[0].indexOf(t[i.keys.ID])>-1?x.yScale(t[i.keys.VALUE]):x.y2Scale(t[i.keys.VALUE])}).attr("r",v.dotRadius).style("stroke","none").style("fill",A),e.exit().remove()}function c(t){var e={key:t[i.keys.DATA]};t.series.forEach(function(t){var n=t[i.keys.ID];e[n]=t[i.keys.VALUE]}),u(O.stack([e]).map(function(t){var e={value:t[0][1]};return e[i.keys.ID]=t.key,e}))}function d(){var t=k.root.selectAll("line").data([0]);t.enter().append("line").classed("vertical-marker",!0).merge(t).attr("y1",0).attr("y2",k.chartHeight),t.exit().remove()}function f(t){k.root.attr("transform","translate(".concat([t,0],")"))}function y(t){return t.on("mouseOverPanel.hover",r).on("mouseMovePanel.hover",n).on("mouseOutPanel.hover",l),this}function p(){return S.on.apply(S,arguments),this}function h(t){return v=(0,o.override)(v,t),this}function g(t){return x=(0,o.override)(x,t),this}function m(t){return O=Object.assign({},O,t),this}function b(){return k.root&&(k.root.remove(),k.root=null),this}var v={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,dotRadius:null,chartType:null},x={yScale:null,y2Scale:null,hasSecondAxis:null,colorScale:null},k={container:t,svg:null,chartWidth:null,chartHeight:null,dateRange:[null,null],brush:null,chartBrush:null,handle:null,data:null,isEnabled:!0},O={stack:null,groupKeys:null},S=a.dispatch("hover"),A=function(t){return x.colorScale(t[i.keys.ID])};return{setConfig:h,setScales:g,setData:m,bindEvents:y,highlightDataPoints:s,highlightStackedDataPoints:c,drawVerticalMarker:d,moveVerticalMarker:f,on:p,destroy:b}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(2),o=n(1)},function(t,e,n){"use strict";function r(t){function e(){d.root||(d.root=d.container.append("div").attr("class","binning-group").style("float","left").style("padding-top","12px").style("padding-left","12px"),d.label=d.root.append("div").attr("class","bin-label").text(c.label),d.autoItem=d.root.append("div").attr("class","item item-auto toggleOnOff").on("click.select",function(){var t=this.classList.contains("selected"),e=!t;f.call("change",this,{name:c.autoLabel,isSelected:e})}).text(c.autoLabel),d.binningItems=d.root.selectAll(".toggleExclusive").data(c.binningToggles).enter().append("div").attr("class",function(t){return"item item-".concat(t," toggleExclusive")}).on("click.select",function(t){var e=this.classList.contains("selected");f.call("change",this,{name:t,isSelected:e})}).text(function(t){return t}));d.root.style("top","".concat(c.margin.top-20,"px")).style("left","".concat(c.margin.left,"px")),n(c.binningResolution),r(c.binningIsAuto)}function n(t){t&&(0,i.exclusiveToggle)(d.binningItems,d.root.select(".item-".concat(t)))}function r(t){d.autoItem.classed("selected",t).classed("dimmed",!t)}function o(){return c.binningIsEnabled?e():u(),this}function l(){return f.on.apply(f,arguments),this}function s(t){return c=Object.assign({},c,t),this}function u(){return d.root&&(d.root.remove(),d.root=null),this}var c={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,autoLabel:"auto",binningToggles:[],label:"BIN:",binningIsAuto:!1,binningResolution:"1mo",binningIsEnabled:!0},d={container:t,root:null,autoItem:null,binningItems:null,isEnabled:!0},f=a.dispatch("change");return{on:l,setConfig:s,destroy:u,drawBinning:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(3)},function(t,e,n){"use strict";function r(t){function e(){v.chartWidth=b.width-b.margin.left-b.margin.right,v.chartHeight=b.height-b.margin.top-b.margin.bottom;var t="auto"===b.xDomain?x.xScale.domain():b.xDomain,e="auto"===b.yDomain?x.yScale.domain():b.yDomain,y="auto"===b.y2Domain&&x.y2Scale?x.y2Scale.domain():b.y2Domain,p=null,h=null,g=null,m=null,O=null,S=null,A=function(t){return t};"time"===b.keyType?A=a.utcFormat(b.inputDateFormat):"number"===b.keyType&&(A=a.format(b.numberFormat));var P=a.format(b.numberFormat),D=a.format(b.numberFormat);v.root||(v.root=v.container.append("div").attr("class","domain-input-group").style("position","absolute").style("top",0),v.xHitZone=v.root.append("div").attr("class","hit-zone x").style("pointer-events","all").style("position","absolute").on("mouseover.dispatch",d).on("mouseout.dispatch",f),v.yHitZone=v.root.append("div").attr("class","hit-zone y").style("pointer-events","all").style("position","absolute").on("mouseover.dispatch",l).on("mouseout.dispatch",s),v.y2HitZone=v.root.append("div").attr("class","hit-zone y2").style("pointer-events","all").style("position","absolute").on("mouseover.dispatch",u).on("mouseout.dispatch",c),v.yMaxInput=v.yHitZone.append("div").attr("class","domain-input y max").style("position","absolute").attr("contentEditable",!0).on("focus",function(){h=this.innerText}).on("blur",function(){var t=this.innerText,e=x.yScale.domain();n(t,"number")&&r(t,e,"max")?(h=t,k.call("domainChange",this,{axis:"y",extent:[e[0],Number(t)]})):this.innerText=h}).call(o.blurOnEnter),v.yMinInput=v.yHitZone.append("div").attr("class","domain-input y min").style("position","absolute").attr("contentEditable",!0).on("focus",function(){p=this.innerText}).on("blur",function(){var t=this.innerText,e=x.yScale.domain();n(t,"number")&&r(t,e,"min")?(p=t,k.call("domainChange",this,{axis:"y",extent:[Number(t),e[1]]})):this.innerText=p}).call(o.blurOnEnter),v.yLockIcon=v.yHitZone.append("div").attr("class","domain-lock y").style("position","absolute").on("click",function(){var t=this.classList.contains("locked");this.classList.toggle("locked",!t);var e=x.yScale.domain();k.call("domainLockToggle",this,{isLocked:!t,axis:"y",extent:e})}),v.y2MaxInput=v.y2HitZone.append("div").attr("class","domain-input y2 max").style("position","absolute").attr("contentEditable",!0).on("focus",function(){S=this.innerText}).on("blur",function(){var t=this.innerText,e=x.y2Scale.domain();n(t,"number")&&r(t,e,"max")?(S=t,k.call("domainChange",this,{axis:"y2",extent:[e[0],Number(t)]})):this.innerText=S}).call(o.blurOnEnter),v.y2MinInput=v.y2HitZone.append("div").attr("class","domain-input y2 min").style("position","absolute").attr("contentEditable",!0).on("focus",function(){O=this.innerText}).on("blur",function(){var t=this.innerText,e=x.y2Scale.domain();n(t,"number")&&r(t,e,"min")?(O=t,k.call("domainChange",this,{axis:"y2",extent:[Number(t),e[1]]})):this.innerText=O}).call(o.blurOnEnter),v.y2LockIcon=v.y2HitZone.append("div").attr("class","domain-lock y2").style("position","absolute").on("click",function(){var t=this.classList.contains("locked");this.classList.toggle("locked",!t);var e=x.yScale.domain();k.call("domainLockToggle",this,{isLocked:!t,axis:"y2",extent:e})}),v.xMinInput=v.xHitZone.append("div").attr("class","domain-input x min").style("position","absolute").attr("contentEditable",!0).on("focus",function(){g=this.innerText}).on("blur",function(){var t=this.innerText,e=x.xScale.domain();if(n(t,b.keyType)&&r(t,e,"min",b.keyType)){var a=(0,i.stringToType)(t,b.keyType);g=t,k.call("domainChange",this,{axis:"x",extent:[a,e[1]]})}else this.innerText=g}).call(o.blurOnEnter),v.xMaxInput=v.xHitZone.append("div").attr("class","domain-input x max").style("position","absolute").attr("contentEditable",!0).on("focus",function(){m=this.innerText}).on("blur",function(){var t=this.innerText,e=x.xScale.domain();if(n(t,b.keyType)&&r(t,e,"max",b.keyType)){var a=(0,i.stringToType)(this.innerText,b.keyType);m=t,k.call("domainChange",this,{axis:"x",extent:[e[0],a]})}else this.innerText=m}).call(o.blurOnEnter),v.xLockIcon=v.xHitZone.append("div").attr("class","domain-lock x").style("position","absolute").on("click",function(){var t=this.classList.contains("locked");this.classList.toggle("locked",!t);var e=x.yScale.domain();k.call("domainLockToggle",this,{isLocked:!t,axis:"x",extent:e})}),s(),c(),f()),b.xDomainEditorIsEnabled?(v.xHitZone.style("width","".concat(v.chartWidth+12,"px")).style("height","".concat(40,"px")).style("top","".concat(b.margin.top+v.chartHeight,"px")).style("left","".concat(b.margin.left,"px")).style("display","block"),v.xMinInput.style("top","".concat(4,"px")).style("left","0px").text(A(t[0])),v.xMaxInput.style("top","".concat(4,"px")).style("right","".concat(12,"px")).text(A(t[1])),v.xLockIcon.classed("locked",b.xLock).style("width","".concat(12,"px")).style("height","".concat(12,"px")).style("right","0px")):v.xHitZone.style("display","none"),b.yDomainEditorIsEnabled?(v.yHitZone.style("width","".concat(40,"px")).style("height","".concat(v.chartHeight+12,"px")).style("top","".concat(b.margin.top-12,"px")).style("left","".concat(b.margin.left-40,"px")).style("display","block"),v.yMaxInput.style("top","".concat(12,"px")).style("right","0px").text(P(e[1])),v.yMinInput.style("top","".concat(v.chartHeight+12-12,"px")).style("right","0px").text(P(e[0])),v.yLockIcon.classed("locked",b.yLock).style("width","".concat(12,"px")).style("height","".concat(12,"px")).style("left","".concat(28,"px")).style("top","".concat(0,"px"))):v.yHitZone.style("display","none"),b.y2DomainEditorIsEnabled?(v.y2HitZone.style("width","".concat(40,"px")).style("height","".concat(v.chartHeight+12,"px")).style("top","".concat(b.margin.top-12,"px")).style("left","".concat(b.margin.left+v.chartWidth,"px")),v.y2MaxInput.style("top","0px").style("left","".concat(4,"px")).text(D(y[1])),v.y2MinInput.style("top","".concat(v.chartHeight+12-12,"px")).style("left","".concat(4,"px")).text(D(y[0])),v.y2LockIcon.classed("locked",b.y2Lock).style("width","".concat(12,"px")).style("height","".concat(12,"px")).style("top","".concat(28,"px"))):v.y2HitZone.style("display","none")}function n(t,e){if("time"===e){var n=a.timeParse(b.inputDateFormat)(t);return Boolean(n)}return!isNaN(t)}function r(t,e,n,r){var i=t;return"time"===r&&(i=a.timeParse(b.inputDateFormat)(t)),"min"===n?i<=e[1]:i>=e[0]}function l(){v.yHitZone.style("opacity","1")}function s(){v.yHitZone.style("opacity","0")}function u(){v.y2HitZone.style("opacity","1")}function c(){v.y2HitZone.style("opacity","0")}function d(){v.xHitZone.style("opacity","1")}function f(){v.xHitZone.style("opacity","0")}function y(){return b.xDomainEditorIsEnabled||b.yDomainEditorIsEnabled||b.y2DomainEditorIsEnabled?e():m(),this}function p(){return k.on.apply(k,arguments),this}function h(t){return x=(0,i.override)(x,t),this}function g(t){return b=(0,i.override)(b,t),this}function m(){return v.root&&(v.root.remove(),v.root=null),this}var b={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,keyType:null,inputDateFormat:"%m-%d-%Y",numberFormat:".2f",xDomain:"auto",yDomain:"auto",y2Domain:"auto",xLock:!1,yLock:!1,y2Lock:!1,xDomainEditorIsEnabled:!0,yDomainEditorIsEnabled:!0,y2DomainEditorIsEnabled:!0},v={container:t,root:null,xHitZone:null,yHitZone:null,y2HitZone:null,yMaxInput:null,yMinInput:null,yLockIcon:null,y2MaxInput:null,y2MinInput:null,y2LockIcon:null,xMinInput:null,xMaxInput:null,xLockIcon:null,chartWidth:null,chartHeight:null},x={xScale:null,yScale:null,y2Scale:null,hasSecondAxis:null},k=a.dispatch("domainChange","domainLockToggle");return{on:p,setScales:h,setConfig:g,drawDomainEditor:y,destroy:m}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(1),o=n(3)},function(t,e,n){"use strict";function r(t){function e(){p.chartWidth=y.width-y.margin.left-y.margin.right,p.chartHeight=y.height-y.margin.top-y.margin.bottom,p.root||(p.root=p.container.append("div").attr("class","brush-range-input-group").style("top",0).style("padding-top","12px"),p.inputMax=p.root.append("div").attr("class","brush-range-input max").attr("contentEditable",!0).on("blur",function(){var t=h.xScale.domain();p.rangeMax=(0,i.stringToType)(p.inputMax.text(),y.keyType),g.call("rangeChange",this,{extent:[t[0],p.rangeMax]})}).call(o.blurOnEnter).style("float","right"),p.root.append("div").attr("class","separator").text("-").style("float","right"),p.inputMin=p.root.append("div").attr("class","brush-range-input min").attr("contentEditable",!0).on("blur",function(){var t=h.xScale.domain();p.rangeMin=(0,i.stringToType)(p.inputMin.text(),y.keyType),g.call("rangeChange",this,{extent:[p.rangeMin,t[1]]})}).call(o.blurOnEnter).style("float","right"));var t=h.xScale.domain(),e=null===p.rangeMin?t[0]:p.rangeMin,n=null===p.rangeMax?t[1]:p.rangeMax;if("time"===y.keyType){var r=a.utcFormat(y.dateFormat);e=r(new Date(e)),n=r(new Date(n))}else{var l=a.format(y.numberFormat);e=l(e),n=l(n)}p.inputMin.text(e),p.inputMax.text(n)}function n(){return p.isEnabled?e():f(),this}function r(t){return p.rangeMin=t,this}function l(t){return p.rangeMax=t,this}function s(t){return p.isEnabled=t,n(),this}function u(){return g.on.apply(g,arguments),this}function c(t){return y=(0,i.override)(y,t),this}function d(t){return h=(0,i.override)(h,t),this}function f(){return p.root&&(p.root.remove(),p.root=null),this}var y={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,keyType:"time",dateFormat:"%b %d, %Y",numberFormat:".2f"},p={container:t,root:null,inputMin:null,inputMax:null,rangeMin:null,rangeMax:null,chartWidth:null,chartHeight:null,isEnabled:!0},h={xScale:null},g=a.dispatch("rangeChange");return{on:u,setConfig:c,drawRangeEditor:n,setRangeMin:r,setRangeMax:l,setScales:d,setVisibility:s}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(1),o=n(3)},function(t,e,n){"use strict";function r(t){function e(){f.chartWidth=d.width-d.margin.left-d.margin.right,f.chartHeight=d.height-d.margin.top-d.margin.bottom,f.root||(f.root=f.container.append("div").attr("class","label-group").style("position","absolute").style("top",0).style("white-space","nowrap"),f.xAxisLabel=f.root.append("div").attr("class","axis-label x").style("position","absolute").attr("contentEditable",!0).on("blur",function(){d.xLabel=this.innerText,y.call("axisLabelChange",this,{value:this.innerText,type:"x"})}).on("keypress",function(){"Enter"===a.event.key&&this.blur()}).style("transform","translate(-50%)"),f.yAxisLabel=f.root.append("div").attr("class","axis-label y").style("position","absolute").attr("contentEditable",!0).on("blur",function(){d.yLabel=this.innerText,y.call("axisLabelChange",this,{value:this.innerText,type:"y"})}).on("keypress",function(){"Enter"===a.event.key&&this.blur()}).style("left",0).style("transform","translate(-50%) rotate(-90deg)"),f.y2AxisLabel=f.root.append("div").attr("class","axis-label y2").style("position","absolute").attr("contentEditable",!0).on("blur",function(){d.y2Label=this.innerText,y.call("axisLabelChange",this,{value:this.innerText,type:"y2"})}).on("keypress",function(){"Enter"===a.event.key&&this.blur()}).style("transform","translate(-50%) rotate(90deg)")),f.xAxisLabel.text(d.xLabel).style("top",function(){var t=this.getBoundingClientRect().height;return"".concat(d.height-t-18,"px")}).style("left","".concat(d.margin.left+f.chartWidth/2,"px")),f.yAxisLabel.text(d.yLabel).style("top","".concat(d.margin.top+f.chartHeight/2,"px")).style("left",function(){return"".concat(this.getBoundingClientRect().width/2+4,"px")}),f.y2AxisLabel.text(d.y2Label).style("top","".concat(d.margin.top+f.chartHeight/2,"px")).style("left",function(){var t=this.getBoundingClientRect().width;return"".concat(d.width-t/2-4,"px")})}function n(){return e(),this}function r(t){return d.xLabel=t,this}function o(t){return d.yLabel=t,this}function l(t){return d.y2Label=t,this}function s(){return y.on.apply(y,arguments),this}function u(t){return d=(0,i.override)(d,t),this}function c(){return f.root&&(f.root.remove(),f.root=null),this}var d={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500},f={container:t,root:null,xAxisLabel:null,yAxisLabel:null,y2AxisLabel:null,xLabel:null,yLabel:null,y2Label:null,chartWidth:null,chartHeight:null},y=a.dispatch("axisLabelChange");return{on:s,setConfig:u,setXLabels:r,setYLabels:o,setY2Labels:l,drawLabels:n,destroy:c}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(1)},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(){function t(t){return Math.random().toString(36).replace(/[^a-z0-9]+/g,"").substr(0,t||5)}function e(t,e,n){var a=i.randomUniform.apply(i,r(e))(),o=(e[1]-e[0])/50,l=i.randomNormal(0,1);return t.map(function(t){return a+=l()*o,!n&&a<o&&(a+=o),{value:a,key:"time"===f.keyType?t.toISOString():t}})}function n(){var n=null;if("time"===f.keyType){y.baseDate=new Date;var r=new Date(y.baseDate.getTime()-g*f.pointCount);n=i.timeDay.range(r,y.baseDate)}else"string"===f.keyType?(n=i.range(0,f.pointCount).map(function(){return t()}),n.sort(function(t,e){return t.localeCompare(e,"en",{numeric:!1})})):"number"===f.keyType&&(n=i.range(0,f.pointCount).map(function(t,e){return e}));var a=i.range(f.lineCount).map(function(t){return{label:"Label ".concat(t),id:t,group:t<f.groupCount?t:0,values:e(n,f.range)}});return y.data={series:a},y.data}function a(t,e){var n=(0,l.cloneData)(t[o.keys.SERIES]),r=[],a=[];n.forEach(function(t){a=a.concat(t.values)}),a=a.map(function(t){return t.key}),a=(0,l.getUnique)(a),n.forEach(function(t){var n={};t[o.keys.VALUES].forEach(function(t){n[t.key]=t.value});var r=a.map(function(t){return{key:t,value:void 0===n[t]?null:n[t]}});t[o.keys.VALUES]=(0,l.sortData)(r,e),t[o.keys.VALUES].forEach(function(t){"time"===e&&(t[o.keys.DATA]=new Date(t[o.keys.DATA])),t[o.keys.VALUE]=Number(t[o.keys.VALUE])})}),n.forEach(function(t){t[o.keys.VALUES].forEach(function(n){var a={};a[o.keys.LABEL]=t[o.keys.LABEL],a[o.keys.GROUP]=t[o.keys.GROUP],a[o.keys.ID]=t[o.keys.ID],a[o.keys.DATA]="time"===e?new Date(n[o.keys.DATA]):n[o.keys.DATA],a[o.keys.VALUE]=n[o.keys.VALUE],r.push(a)})});var s=(0,l.sortData)(r,e),u=i.nest().key(p).entries(s).map(function(t){var n={};return n[o.keys.DATA]="time"===e?new Date(t.key):t.key,n[o.keys.SERIES]=t.values,n}),c={};n.forEach(function(t){c[t[o.keys.GROUP]]||(c[t[o.keys.GROUP]]=[]),c[t[o.keys.GROUP]].push(t[o.keys.ID])});var d=u.map(function(t){var e={key:t[o.keys.DATA]};return t.series.forEach(function(t){e[t[o.keys.ID]]=t[o.keys.VALUE]}),e});return{dataBySeries:n,dataByKey:u,stack:i.stack().keys(n.map(h)).order(i.stackOrderNone).offset(i.stackOffsetNone),stackData:d,flatDataSorted:s,groupKeys:c}}function s(t,e,n,r){var a=(0,l.invertScale)(n.xScale,t,r),o=i.bisector(p).left,s=o(e.dataByKey,a),u=e.dataByKey[s],c=e.dataByKey[Math.max(s-1,0)],d=null;return a&&u&&c&&(d=a-c.key<u.key-a?c:u),d}function u(t){var e=(0,l.cloneData)(y.data);return e[o.keys.SERIES].forEach(function(e){var n=e[o.keys.VALUES],r=n.map(function(t){return t[o.keys.DATA]}),a=r.indexOf(t[0]),i=r.indexOf(t[1]);e[o.keys.VALUES]=e[o.keys.VALUES].slice(a,i)}),e}function c(t){var e=(0,l.cloneData)(y.data);return e[o.keys.SERIES].forEach(function(e){e[o.keys.VALUES]=e[o.keys.VALUES].filter(function(e){var n=new Date(e[o.keys.DATA]).getTime();return n>=t[0].getTime()&&n<=t[1].getTime()})}),e}function d(t){return f=Object.assign({},f,t),this}var f={keyType:"number",range:[0,100],pointCount:200,groupCount:2,lineCount:4},y={data:null,baseDate:null},p=function(t){return t[o.keys.DATA]},h=function(t){return t[o.keys.ID]},g=864e5;return{generateTestDataset:n,generateSeries:e,cleanData:a,getNearestDataPoint:s,filterByDate:c,filterByKey:u,setConfig:d}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),o=n(2),l=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Chart",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Tooltip",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Legend",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"DataManager",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Observer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Binning",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"DomainEditor",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"BrushRangeEditor",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"Label",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"Brush",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"Hover",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"Interactors",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"colors",{enumerable:!0,get:function(){return g.colors}});var a=r(n(15)),i=r(n(4)),o=r(n(6)),l=r(n(13)),s=r(n(21)),u=r(n(9)),c=r(n(10)),d=r(n(11)),f=r(n(12)),y=r(n(7)),p=r(n(8)),h=r(n(3)),g=n(5);n(22)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}function i(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return a(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t){function e(){return n(),M.dataBySeries&&r(),this}function n(){var t="auto"===j.width?w.container.clientWidth:j.width,e="auto"===j.height?w.container.clientHeight:j.height;if(w.chartWidth=Math.max(t-j.margin.left-j.margin.right,0),w.chartHeight=Math.max(e-j.margin.top-j.margin.bottom,0),!w.svg){var n=l.select(w.container).html('<div class="mapd3 mapd3-container">\n        <div class="header-group"></div>\n        <svg class="chart">\n          <g class="chart-group"></g>\n          <g class="panel-group">\n            <rect class="panel-background"></rect>\n          </g>\n          <rect class="masking-rectangle"></rect>\n        </svg>\n      </div>');w.container=n.select(".mapd3-container").style("position","relative"),w.svg=n.select("svg"),w.headerGroup=n.select(".header-group").style("position","absolute"),w.panel=w.svg.select(".panel-group"),w.chart=w.svg.select(".chart-group"),A(),Object.assign(I,{scale:(0,d.default)(),axis:(0,p.default)(w.chart),line:(0,f.default)(w.panel),bar:(0,y.default)(w.panel),tooltip:(0,h.default)(w.container),legend:(0,g.default)(w.container),brush:(0,m.default)(w.panel),hover:(0,b.default)(w.panel),binning:(0,v.default)(w.headerGroup),domainEditor:(0,x.default)(w.container),brushRangeEditor:(0,k.default)(w.headerGroup),label:(0,O.default)(w.container)}),Object.assign(C,{onBrush:(0,c.rebind)(I.brush),onHover:(0,c.rebind)(I.hover),onBinning:(0,c.rebind)(I.binning),onDomainEditor:(0,c.rebind)(I.domainEditor),onBrushRangeEditor:(0,c.rebind)(I.brushRangeEditor),onLabel:(0,c.rebind)(I.label),onPanel:(0,c.rebind)(_)})}return w.svg.attr("width",j.width).attr("height",j.height),w.headerGroup.style("width","".concat(w.chartWidth,"px")).style("left","".concat(j.margin.left,"px")),w.panel.attr("transform","translate(".concat(j.margin.left,",").concat(j.margin.top,")")).select(".panel-background").attr("width",w.chartWidth).attr("height",w.chartHeight).attr("fill","transparent"),this}function r(){I.scale.setConfig(j).setData(M),L=I.scale.getScales(),I.axis.setConfig(j).setScales(L).drawAxis().drawGridLines(),I.line.setConfig(j).setScales(L).setData(M).drawMarks(),I.bar.setConfig(j).setScales(L).setData(M).drawMarks(),I.tooltip.setConfig(j).setScales(L).bindEvents(_);var t=M.dataBySeries.map(function(t){return{id:t.id,key:t.key,label:t.label}});return I.legend.setConfig(j).setConfig({tooltipIsEnabled:j.legendIsEnabled}).setScales(L).setTitle(j.legendTitle).setContent(t).setXPosition(j.legendXPosition).setYPosition(j.legendYPosition).drawTooltip(),I.brush.setConfig(j).setScales(L).setData(M).drawBrush(),I.hover.setConfig(j).setScales(L).setData(M).bindEvents(_),I.binning.setConfig(j).drawBinning(),I.domainEditor.setConfig(j).setScales(L).drawDomainEditor(),I.brushRangeEditor.setConfig(j).setScales(L).setRangeMin(j.brushRangeMin).setRangeMax(j.brushRangeMax).drawRangeEditor().setVisibility(j.brushRangeIsEnabled),I.label.setConfig(j).setXLabels(j.xLabel).setYLabels(j.yLabel).setY2Labels(j.y2Label).drawLabels(),o(),this}function a(t){M.data=(0,c.cloneData)(t[u.keys.SERIES]);var n=H.cleanData(t,j.keyType);return Object.assign(M,n),e(),this}function o(){j.isAnimated&&(w.maskingRectangle=w.svg.select(".masking-rectangle").attr("width",w.chartWidth-2).attr("height",w.chartHeight).attr("x",j.margin.left+1).attr("y",j.margin.top),w.maskingRectangle.transition().duration(j.animationDuration).ease(j.ease).attr("width",0).attr("x",j.width-j.margin.right).on("end",function(){return w.maskingRectangle.remove()}))}function A(){var t=(0,c.throttle)(function(){_.call.apply(_,arguments)},20);w.panel.on("mouseover.dispatch",function(){_.call("mouseOverPanel",null,l.mouse(w.panel.node()))}).on("mouseout.dispatch",function(){_.call("mouseOutPanel",null,l.mouse(w.panel.node()))}).on("mousemove.dispatch",function(){var e=l.mouse(w.panel.node()),n=i(e,2),r=n[0],a=n[1];if(M.data){var o=r,s=H.getNearestDataPoint(o,M,L,j.keyType);if(s){var c=L.xScale(s[u.keys.DATA]);t("mouseMovePanel",null,s,c,a)}}})}function P(){return w.svg||e(),C}function D(){return _.on.apply(_,arguments),this}function T(t){return j=(0,c.override)(j,t),this}function E(){w.svg.on(".",null).remove()}var j={margin:{top:48,right:32,bottom:48,left:32},width:800,height:500,keyType:"time",chartType:"line",ease:l.easeLinear,isAnimated:!1,animationDuration:1500,colorSchema:s.colors.mapdColors.map(function(t){return{value:t}}),defaultColor:"skyblue",xDomain:"auto",yDomain:"auto",y2Domain:"auto",tickPadding:5,xAxisFormat:"auto",yAxisFormat:".2f",y2AxisFormat:".2f",tickSizes:8,yTicks:"auto",y2Ticks:"auto",xTickSkip:0,grid:null,axisTransitionDuration:0,xTitle:"",yTitle:"",dotRadius:4,mouseChaseDuration:0,tooltipEase:l.easeQuadInOut,tooltipHeight:48,tooltipWidth:160,seriesOrder:[],tooltipIsEnabled:!0,tooltipTitle:null,dateFormat:"%b %d, %Y",inputDateFormat:"%m-%d-%Y",numberFormat:".2f",legendXPosition:"auto",legendYPosition:"auto",legendTitle:"",legendIsEnabled:!0,binningResolution:"1mo",binningIsAuto:!0,binningToggles:["10y","1y","1q","1mo"],binningIsEnabled:!0,xLock:!1,yLock:!1,y2Lock:!1,xDomainEditorIsEnabled:!0,yDomainEditorIsEnabled:!0,y2DomainEditorIsEnabled:!0,brushRangeMin:null,brushRangeMax:null,brushRangeIsEnabled:!0,brushIsEnabled:!0,xLabel:"",yLabel:"",y2Label:""},L={xScale:null,yScale:null,y2Scale:null,hasSecondAxis:null,colorScale:null},w={container:t,svg:null,panel:null,margin:null,maskingRectangle:null,chartWidth:null,chartHeight:null,xAxis:null,yAxis:null,yAxis2:null},M={dataBySeries:null,dataByKey:null,data:null,groupKeys:{},hasSecondAxis:!1,stackData:null,stack:null,flatDataSorted:null},I={},C={},_=l.dispatch("mouseOverPanel","mouseOutPanel","mouseMovePanel"),H=(0,S.default)();return{render:e,setConfig:T,setData:a,on:D,destroy:E,getEvents:P}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),s=n(5),u=n(2),c=n(1),d=r(n(17)),f=r(n(18)),y=r(n(19)),p=r(n(20)),h=r(n(4)),g=r(n(6)),m=r(n(7)),b=r(n(8)),v=r(n(9)),x=r(n(10)),k=r(n(11)),O=r(n(12)),S=r(n(13))},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(){function t(t){var e=f.width-f.margin.left-f.margin.right,n=null,r=null;return"time"===f.keyType?n=a.scaleTime():"number"===f.keyType?n=a.scaleLinear():(n="bar"===f.chartType||"stackedBar"===f.chartType?a.scaleBand():a.scalePoint(),n.padding(0)),r="auto"===f.xDomain?"string"===f.keyType?t:a.extent(t):f.xDomain,n.domain(r).range([0,e]),n}function e(t){var e=f.height-f.margin.top-f.margin.bottom;return a.scaleLinear().domain(t).rangeRound([e,0])}function n(){var t=y.dataBySeries.map(p);return a.scaleOrdinal().range(f.colorSchema.map(function(t){return t.value})).domain(f.colorSchema.map(function(e,n){return e.key||t[n]})).unknown(f.defaultColor)}function r(){var t={};return y.dataBySeries.forEach(function(e){var n=e[i.keys.GROUP];t[n]||(t[n]={allValues:[],allKeys:[]}),t[n].allValues=t[n].allValues.concat(e[i.keys.VALUES].map(g)),t[n].allKeys=t[n].allKeys.concat(e[i.keys.VALUES].map(h))}),t}function l(){var r=y.dataByKey.map(function(t){return a.sum(t.series.map(function(t){return t.value}))}),i=y.flatDataSorted.map(h),l=(0,o.getUnique)(i),s=t(l),u=n(),c=null;if("auto"===f.yDomain){c=[0,a.extent(r)[1]]}else c=f.yDomain;return{xScale:s,yScale:e(c),colorScale:u}}function s(){var i=r(),o=Object.keys(y.groupKeys).length>1,l=i[0],s=l.allKeys,u=t(s),c=n(),d=null;d="auto"===f.yDomain?a.extent(l.allValues):f.yDomain;var p=e(d),h=null;if(o){var g=null;if("auto"===f.y2Domain){var m=i[1];g=a.extent(m.allValues)}else g=f.y2Domain;h=p.copy().domain(g)}return{hasSecondAxis:o,xScale:u,yScale:p,y2Scale:h,colorScale:c}}function u(){return"stackedBar"===f.chartType||"stackedArea"===f.chartType?l():s()}function c(t){return f=(0,o.override)(f,t),this}function d(t){return y=Object.assign({},y,t),this}var f={margin:{top:60,right:30,bottom:40,left:70},height:null,width:null,keyType:null,chartType:null,colorSchema:null,defaultColor:null,xDomain:"auto",yDomain:"auto",y2Domain:"auto"},y={dataByKey:null,dataBySeries:null,flatDataSorted:null,groupKeys:null},p=function(t){return t[i.keys.ID]},h=function(t){return t[i.keys.DATA]},g=function(t){return t[i.keys.VALUE]};return{setConfig:c,setData:d,getScales:u}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(2),o=n(1)},function(t,e,n){"use strict";function r(t){function e(){h.chartWidth=y.width-y.margin.left-y.margin.right,h.chartHeight=y.height-y.margin.top-y.margin.bottom,h.root||(h.root=h.container.append("g").classed("mark-group",!0))}function n(){var t={};y.colorSchema.forEach(function(e){t[e.key]=e.style});var e={dashes:"5, 4",solid:null,dotted:"1 4"},n=a.line().x(function(t){return p.xScale(t[i.keys.DATA])}).y(function(t){return p.yScale(t[i.keys.VALUE])}),r=a.line().x(function(t){return p.xScale(t[i.keys.DATA])}).y(function(t){return p.y2Scale(t[i.keys.VALUE])}).curve(a.curveCatmullRom);Array.isArray(y.xDomain)&&(n.defined(function(t){return t[i.keys.DATA]>=y.xDomain[0]&&t[i.keys.DATA]<=y.xDomain[1]}),r.defined(function(t){return t[i.keys.DATA]>=y.xDomain[0]&&t[i.keys.DATA]<=y.xDomain[1]}));var o=h.root.selectAll(".mark").data(g.dataBySeries);o.enter().append("path").merge(o).attr("class","mark line").classed("y2-line",function(t){return t[i.keys.GROUP]>0}).attr("d",function(t){return 0===t[i.keys.GROUP]?n(t[i.keys.VALUES]):r(t[i.keys.VALUES])}).style("stroke",m).style("fill","none").attr("stroke-dasharray",function(n){var r=t[n[i.keys.ID]];return e[r]}),o.exit().remove()}function r(){var t=a.area().x(function(t){return p.xScale(t[i.keys.DATA])}).y0(function(t){return p.yScale(t[i.keys.VALUE])}).y1(function(){return h.chartHeight}),e=a.area().x(function(t){return p.xScale(t[i.keys.DATA])}).y0(function(t){return p.y2Scale(t[i.keys.VALUE])}).y1(function(){return h.chartHeight}).curve(a.curveCatmullRom),n=h.root.selectAll(".mark").data(g.dataBySeries);n.enter().append("path").merge(n).attr("class","mark area").classed("y2-area",function(t){return t[i.keys.GROUP]>0}).attr("d",function(n){return 0===n[i.keys.GROUP]?t(n[i.keys.VALUES]):e(n[i.keys.VALUES])}).style("stroke",m).style("fill",m),n.exit().remove()}function l(){var t=a.area().x(function(t){return p.xScale(t.data[i.keys.DATA])}).y0(function(t){return p.yScale(t[0])}).y1(function(t){return p.yScale(t[1])}),e=h.root.selectAll(".mark").data(g.stack(g.stackData));e.enter().append("path").merge(e).attr("class","mark stacked-area").attr("d",t).style("stroke","none").style("fill",function(t){return p.colorScale(t.key)}),e.exit().remove()}function s(){e(),"area"===y.chartType?r():"line"===y.chartType?n():"stackedArea"===y.chartType&&l()}function u(t){return y=(0,o.override)(y,t),this}function c(t){return p=(0,o.override)(p,t),this}function d(t){return g=Object.assign({},g,t),this}function f(){return h.root&&(h.root.remove(),h.root=null),this}var y={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,chartType:null,colorSchema:["skyblue"],xDomain:"auto"},p={colorScale:null,xScale:null,yScale:null,y2Scale:null},h={container:t,svg:null,chartHeight:null},g={dataBySeries:null,groupKeys:null,stack:null,stackData:null},m=function(t){return p.colorScale(t[i.keys.ID])};return{setConfig:u,setScales:c,setData:d,drawMarks:s,destroy:f}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(2),o=n(1)},function(t,e,n){"use strict";function r(t){function e(){y.chartWidth=d.width-d.margin.left-d.margin.right,y.chartHeight=d.height-d.margin.top-d.margin.bottom,y.root||(y.root=y.container.append("g").classed("mark-group",!0))}function n(){var t=y.root.selectAll(".mark").data(p.dataBySeries[0].values);t.enter().append("rect").attr("class","mark rect").merge(t).attr("x",function(t){return f.xScale(t[a.keys.DATA])}).attr("y",function(t){return f.yScale(t[a.keys.VALUE])}).attr("width",function(){return f.xScale.bandwidth()}).attr("height",function(t){return y.chartHeight-f.yScale(t[a.keys.VALUE])}).style("stroke","white").style("fill",h),t.exit().remove()}function r(){var t=y.root.selectAll(".bar-group").data(p.stack(p.stackData)),e=t.enter().append("g").attr("class","bar-group").merge(t).attr("fill",function(t){return f.colorScale(t.key)}).attr("stroke","white");t.exit().remove();var n=e.selectAll(".mark").data(function(t){return t});n.enter().append("rect").attr("class","mark").merge(n).attr("x",function(t){return f.xScale(t.data[a.keys.DATA])}).attr("y",function(t){return f.yScale(t[1])}).attr("height",function(t){return f.yScale(t[0])-f.yScale(t[1])}).attr("width",f.xScale.bandwidth()),n.exit().remove()}function o(){e(),"bar"===d.chartType?n():"stackedBar"===d.chartType&&r()}function l(t){return d=(0,i.override)(d,t),this}function s(t){return f=(0,i.override)(f,t),this}function u(t){return p=Object.assign({},p,t),this}function c(){y.root&&(y.root.remove(),y.root=null)}var d={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,chartType:null},f={colorScale:null,xScale:null,yScale:null,y2Scale:null},y={container:t,svg:null,chartHeight:null},p={dataBySeries:null,groupKeys:null,stack:null,stackData:null},h=function(t){return f.colorScale(t[a.keys.ID])};return{setConfig:l,setScales:s,setData:u,drawMarks:o,destroy:c}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=n(2),i=n(1)},function(t,e,n){"use strict";function r(t){function e(){p.chartWidth=f.width-f.margin.left-f.margin.right,p.chartHeight=f.height-f.margin.top-f.margin.bottom,p.root||(p.root=p.container.append("g").classed("axis-group",!0).style("pointer-events","none"),p.root.append("g").attr("class","grid-lines-group"),p.root.append("g").attr("class","axis x"),p.root.append("g").attr("class","axis y"),p.root.append("g").attr("class","axis y2")),p.root.attr("transform","translate(".concat(f.margin.left,", ").concat(f.margin.top,")"))}function n(){if("time"===f.keyType){if(f.xAxisFormat&&"auto"!==f.xAxisFormat){var t=a.timeFormat(f.xAxisFormat);p.xAxis.tickFormat(t)}}else if("string"===f.keyType)p.xAxis.tickValues(y.xScale.domain().filter(function(t,e){return!(e%f.xTickSkip)}));else if("number"===f.keyType&&f.xAxisFormat&&"auto"!==f.xAxisFormat){var e=a.format(f.xAxisFormat);p.xAxis.tickFormat(e)}}function r(t){if("auto"===f.yAxisFormat){var e=f.numberFormat,n=y.yScale.domain();e=n[1]-n[0]<1?".2f":n[1]-n[0]<100?".1f":n[1]-n[0]<1e3?".0f":(n[1],n[0],".2s"),t.tickFormat(a.format(e))}else"string"==typeof f.yAxisFormat&&t.tickFormat(a.format(f.yAxisFormat))}function o(){p.xAxis=a.axisBottom(y.xScale).tickSize(f.tickSizes,0).tickPadding(f.tickPadding),n(),p.yAxis=a.axisLeft(y.yScale).tickSize([f.tickSizes]).tickPadding(f.tickPadding),r(p.yAxis),Number.isInteger(f.yTicks)?p.yAxis.ticks(f.yTicks):p.yAxis.ticks(Math.ceil(p.chartHeight/f.tickSpacing)),y.hasSecondAxis&&(p.y2Axis=a.axisRight(y.y2Scale).tickSize([f.tickSizes]).tickPadding(f.tickPadding),r(p.y2Axis),isNaN(f.y2Ticks)||p.y2Axis.ticks(f.y2Ticks))}function l(){return e(),o(),p.root.select(".axis.x").attr("transform","translate(0, ".concat(p.chartHeight,")")).call(p.xAxis),p.root.select(".axis.y").transition().duration(f.axisTransitionDuration).ease(f.ease).call(p.yAxis),y.hasSecondAxis&&p.root.select(".axis.y2").attr("transform","translate(".concat(p.chartWidth,", 0)")).transition().duration(f.axisTransitionDuration).ease(f.ease).call(p.y2Axis),this}function s(){if("horizontal"===f.grid||"full"===f.grid){var t=null;t=Number.isInteger(f.yTicks)?f.yTicks:Math.ceil(p.chartHeight/f.tickSpacing),p.horizontalGridLines=p.root.select(".grid-lines-group").selectAll("line.horizontal-grid-line").data(y.yScale.ticks(t)),p.horizontalGridLines.enter().append("line").attr("class","horizontal-grid-line").merge(p.horizontalGridLines).transition().duration(f.axisTransitionDuration).attr("x2",p.chartWidth).attr("y1",y.yScale).attr("y2",y.yScale),p.horizontalGridLines.exit().remove()}return"vertical"!==f.grid&&"full"!==f.grid||(p.verticalGridLines=p.root.select(".grid-lines-group").selectAll("line.vertical-grid-line").data(p.xAxis.tickValues()),p.verticalGridLines.enter().append("line").attr("class","vertical-grid-line").merge(p.verticalGridLines).transition().duration(f.axisTransitionDuration).attr("y1",0).attr("y2",p.chartHeight).attr("x1",y.xScale).attr("x2",y.xScale),p.verticalGridLines.exit().remove()),this}function u(t){return f=(0,i.override)(f,t),this}function c(t){return y=(0,i.override)(y,t),this}function d(){p.root&&(p.root.remove(),p.root=null)}var f={margin:{top:60,right:30,bottom:40,left:70},width:800,height:500,tickSizes:null,tickPadding:null,xAxisFormat:null,yAxisFormat:null,y2AxisFormat:null,keyType:null,yTicks:null,y2Ticks:null,xTickSkip:null,axisTransitionDuration:null,ease:null,grid:null,hoverZoneSize:30,tickSpacing:40,dateFormat:"%b %d, %Y",numberFormat:".2f"},y={xScale:null,yScale:null,y2Scale:null,hasSecondAxis:null},p={container:t,background:null,chartHeight:null,chartWidth:null,xAxis:null,yAxis:null,y2Axis:null,horizontalGridLines:null,verticalGridLines:null};return{setConfig:u,setScales:c,drawAxis:l,drawGridLines:s,destroy:d}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0)),i=n(1)},function(t,e,n){"use strict";function r(t){function e(){return r.on.apply(r,arguments),this}function n(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return r.call.apply(r,[t,this].concat(n)),this}var r=a.dispatch("brushChange","dataFilter"),i=t;return r.on("brushChange.observer",function(t,e){n("dataFilter","time"===e.keyType?i.filterByDate(t):i.filterByKey(t))}),{sub:e,pub:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(0))},function(t,e){}])});